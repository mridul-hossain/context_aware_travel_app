MDScreenManager:
    LoginScreen:
    DashboardScreen:
    CuisinesSelectionScreen:
    ActivitiesSelectionScreen:
    AttractionsSelectionScreen:
    ProfileScreen:

<LoginScreen>:
    name: "login"
    MDFloatLayout:
        # --- LAYER 1: The Background Image ---
        FitImage:
            source: "assets/background.jpg"  # Replace with a photo of people/travel
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

        # --- LAYER 2: The Blue Overlay ---
        # This creates that blue tint over the photo
        MDBoxLayout:
            md_bg_color: 0.05, 0.2, 0.7, 0.85  # Deep Blue with 85% opacity
            size_hint: 1, 1

        # --- LAYER 3: The Content ---
        MDBoxLayout:
            orientation: "vertical"
            padding: dp(30)
            spacing: dp(20)
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            # --- Top Spacer to push content down ---
            Widget:
                size_hint_y: 0.2

            # --- Logo / App Name ---
            MDLabel:
                text: "Travel Companion"  # Or your Logo Image
                halign: "center"
                font_style: "H4"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1  # White
                bold: True
            
            MDLabel:
                text: "Get started!"
                halign: "center"
                font_style: "H5"
                theme_text_color: "Custom"
                text_color: 1, 1, 1, 1  # White
                bold: True
                size_hint_y: None
                height: self.texture_size[1]

            MDLabel:
                text: "Find your next adventure by connecting with the world."
                halign: "center"
                theme_text_color: "Custom"
                text_color: 0.9, 0.9, 0.9, 1  # Off-white
                font_size: "14sp"
                size_hint_y: None
                height: dp(60)

            # --- Spacer ---
            Widget:
                size_hint_y: 0.1

            MDLabel:
                id: status_label
                text: ""
                halign: "center"
                theme_text_color: "Custom"
                text_color: 0.5, 0.0, 0.0, 1
                font_size: "12sp"
                bold: True
                size_hint_y: None
                height: dp(20)

            # --- BUTTON 1: Google Login (Styled like the blue button) ---
            MDFillRoundFlatIconButton:
                id: google_button
                text: "Continue with Google"
                icon: "google"
                pos_hint: {"center_x": 0.5}
                size_hint_x: 1
                height: dp(50)
                md_bg_color: 1, 1, 1, 1      # White button
                theme_text_color: "Custom"
                text_color: 0, 0, 0, 1       # Black text
                icon_color: 0, 0, 0, 1       # Black icon
                on_release: root.do_login()  # Links to your Python code

            # --- Bottom Spacer ---
            Widget:
                size_hint_y: 0.3

<CuisinesSelectionScreen>:
    name: "cuisines_selection"
    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(20)
        md_bg_color: 1, 1, 1, 1  # White background

        # --- Title and Subtitle Area ---
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: dp(150)
            spacing: dp(10)
            padding: dp(10)

            # --- Back Button, Dashes & Skip row ---
            MDBoxLayout:
                size_hint_y: None
                height: dp(30)

                # --- Back Button ---
                MDIconButton:
                    icon: "chevron-left" # A better icon for "back" than just '<'
                    pos_hint: {"left": 1, "center_y": 0.5} # Position on the far left
                    theme_icon_color: "Custom"
                    icon_color: 0, 0, 0, 1 # Black icon
                    md_bg_color: 0.95, 0.95, 0.95, 1 # Light gray background for the circle
                    # Force a rounded background circle (size must match radius)
                    size_hint: None, None
                    size: dp(30), dp(30)
                    line_color: 0, 0, 0, 0 # Remove border line
                    on_release: root.manager.current = "activities_selection" # Action: Go back to ActivitiesSelectionScreen

                Widget: #space to push right
                    size_hint_x: 0.35

                # --- The 3 Dashes Container ---
                MDBoxLayout:
                    spacing: dp(10)
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
        
                    # DASH 1 (Active Style - Colorful)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)  # Width 20, Height 6
                        radius: [3,]         # Rounded corners (half of height)
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                    # DASH 2 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                    # DASH 3 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: app.theme_cls.primary_color
                        elevation: 0
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1

            MDLabel:
                text: "Complete your account"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
                bold: True
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1
            
            MDLabel:
                text: "What kind of foods do you enjoy?"
                halign: "center"
                theme_text_color: "Primary"
                bold: True

            MDLabel:
                text: "Choose as many as you like"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
        
        # --- Scrollable Grid for Options ---
        MDScrollView:
            do_scroll_x: True
            do_scroll_y: True

            MDGridLayout:
                cols: 3  # Based on the image layout
                spacing: dp(10)
                padding: dp(10)
                adaptive_size: True
                height: self.minimum_height

                # Use MDRectangleFlatButton for square/flat look
                # Theme colors are used to style the buttons when selected/unselected.

                # Row 1
                SelectableFlatButton:
                    text: "Indian"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Chinese"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Japanese"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 2
                SelectableFlatButton:
                    text: "Korean"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Thai"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Italian"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 3
                SelectableFlatButton:
                    text: "French"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Mexican"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Middle Eastern"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 4 (Example options)
                SelectableFlatButton:
                    text: "Vietnamese"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "American"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Local / Traditional"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)

                # Row 5 (Example options)
                SelectableFlatButton:
                    text: "African"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)


        # --- Next Button (MDRaisedButton simulates the fill color) ---
        MDRaisedButton:
            text: "Complete"
            pos_hint: {"center_x": 0.5}
            size_hint_x: 1
            height: dp(50)
            # The on_release action links to the method in SurveyScreen
            on_release: root.go_to_dashboard()

<ActivitiesSelectionScreen>:
    name: "activities_selection"
    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(20)
        md_bg_color: 1, 1, 1, 1  # White background

        # --- Title and Subtitle Area ---
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: dp(150)
            spacing: dp(10)
            padding: dp(10)

            # --- Back Button, Dashes & Skip row ---
            MDBoxLayout:
                size_hint_y: None
                height: dp(30)

                # --- Back Button ---
                MDIconButton:
                    icon: "chevron-left" # A better icon for "back" than just '<'
                    pos_hint: {"left": 1, "center_y": 0.5} # Position on the far left
                    theme_icon_color: "Custom"
                    icon_color: 0, 0, 0, 1 # Black icon
                    md_bg_color: 0.95, 0.95, 0.95, 1 # Light gray background for the circle
                    # Force a rounded background circle (size must match radius)
                    size_hint: None, None
                    size: dp(30), dp(30)
                    line_color: 0, 0, 0, 0 # Remove border line
                    on_release: root.manager.current = "attractions_selection" # Action: Go back to AttractionsSelectionScreen

                Widget: #space to push right
                    size_hint_x: 0.5

                # --- The 3 Dashes Container ---
                MDBoxLayout:
                    spacing: dp(10)
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
        
                    # DASH 1 (Active Style - Colorful)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)  # Width 20, Height 6
                        radius: [3,]         # Rounded corners (half of height)
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                    # DASH 2 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: app.theme_cls.primary_color
                        elevation: 0

                    # DASH 3 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                # --- Skip Button ---
                MDFlatButton:
                    text: "Skip"
                    pos_hint: {"center_y": 0.5, "right": 1}
                    size_hint: None, None # Fixed width
                    width: dp(60) 
                    theme_text_color: "Hint" # Use a lighter color for skip
                    font_size: "14sp"
                    bold: True
                    # Action: Skip the survey and go to the dashboard
                    on_release: root.go_to_next_screen()
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1

            MDLabel:
                text: "Complete your account"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
                bold: True
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1
            
            MDLabel:
                text: "What kind of activities do you like?"
                halign: "center"
                theme_text_color: "Primary"
                bold: True

            MDLabel:
                text: "Choose as many as you like"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
        
        # --- Scrollable Grid for Options ---
        MDScrollView:
            do_scroll_x: True
            do_scroll_y: True

            MDGridLayout:
                cols: 3  # Based on the image layout
                spacing: dp(10)
                padding: dp(10)
                adaptive_size: True
                height: self.minimum_height

                # Use MDRectangleFlatButton for square/flat look
                # Theme colors are used to style the buttons when selected/unselected.

                # Row 1
                SelectableFlatButton:
                    text: "Hiking"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Cycling"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Kayaking"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 2
                SelectableFlatButton:
                    text: "Boating"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Camping"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Fishing"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 3
                SelectableFlatButton:
                    text: "Yoga"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Ziplining"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Gym Workout"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 4 (Example options)
                SelectableFlatButton:
                    text: "Swimming"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Bowling"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Escape Rooms"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)

                # Row 5 (Example options)
                SelectableFlatButton:
                    text: "VR Gaming"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Spa & Wellness"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Skiing / Snowboarding"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)


        # --- Next Button (MDRaisedButton simulates the fill color) ---
        MDRaisedButton:
            text: "Next"
            pos_hint: {"center_x": 0.5}
            size_hint_x: 1
            height: dp(50)
            # The on_release action links to the method in SurveyScreen
            on_release: root.go_to_next_screen()

<AttractionsSelectionScreen>:
    name: "attractions_selection"
    MDBoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(20)
        md_bg_color: 1, 1, 1, 1  # White background

        # --- Title and Subtitle Area ---
        MDBoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: dp(150)
            spacing: dp(10)
            padding: dp(10)

            # --- Back Button, Dashes & Skip row ---
            MDBoxLayout:
                size_hint_y: None
                height: dp(30)

                Widget: #space to push right
                    size_hint_x: 0.85

                # --- The 3 Dashes Container ---
                MDBoxLayout:
                    spacing: dp(10)
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
        
                    # DASH 1 (Active Style - Colorful)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)  # Width 20, Height 6
                        radius: [3,]         # Rounded corners (half of height)
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: app.theme_cls.primary_color
                        elevation: 0

                    # DASH 2 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                    # DASH 3 (Inactive Style - Grey)
                    MDCard:
                        size_hint: None, None
                        size: dp(20), dp(6)
                        radius: [3,]
                        pos_hint: {"center_x": 0.5, "center_y": 0.5}
                        md_bg_color: 0.9, 0.9, 0.9, 1 # Light Grey
                        elevation: 0

                # --- Skip Button ---
                MDFlatButton:
                    text: "Skip"
                    pos_hint: {"center_y": 0.5, "right": 1}
                    size_hint: None, None # Fixed width
                    width: dp(60) 
                    theme_text_color: "Hint" # Use a lighter color for skip
                    font_size: "14sp"
                    bold: True
                    # Action: Skip the survey and go to the dashboard
                    on_release: root.go_to_next_screen()
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1

            MDLabel:
                text: "Complete your account"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
                bold: True
            
            Widget: # Spacer to push text down
                size_hint_y: 0.1
            
            MDLabel:
                text: "What types of places do you most enjoy visiting?"
                halign: "center"
                theme_text_color: "Primary"
                bold: True

            MDLabel:
                text: "Choose as many as you like"
                halign: "center"
                font_style: "Caption"
                theme_text_color: "Custom"
                text_color: 0.4, 0.4, 0.4, 1 # Medium grey
        
        # --- Scrollable Grid for Options ---
        MDScrollView:
            do_scroll_x: True
            do_scroll_y: True

            MDGridLayout:
                cols: 3  # Based on the image layout
                spacing: dp(10)
                padding: dp(10)
                adaptive_size: True
                height: self.minimum_height

                # Use MDRectangleFlatButton for square/flat look
                # Theme colors are used to style the buttons when selected/unselected.

                # Row 1
                SelectableFlatButton:
                    text: "Beach"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Mountain"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Museum"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 2
                SelectableFlatButton:
                    text: "Art Gallery"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Waterfall"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Park"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                
                # Row 3
                SelectableFlatButton:
                    text: "Lake"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Riverside"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)
                SelectableFlatButton:
                    text: "Historical Monument"
                    font_size: "14sp"
                    on_release: root.handle_selection(self)


        # --- Next Button (MDRaisedButton simulates the fill color) ---
        MDRaisedButton:
            text: "Next"
            pos_hint: {"center_x": 0.5}
            size_hint_x: 1
            height: dp(50)
            # The on_release action links to the method in SurveyScreen
            on_release: root.go_to_next_screen()

<TravelLocationCard>:
    orientation: "vertical"
    size_hint: None, None
    size: "200dp", "180dp"
    radius: [15]
    ripple_behavior: True
    md_bg_color: 1, 1, 1, 1
    elevation: 2

    FitImage:
        id: place_image
        source: root.source
        size_hint_y: .65
        radius: [15, 15, 0, 0]

    MDBoxLayout:
        orientation: "vertical"
        padding: "8dp"
        size_hint_y: .35

        MDLabel:
            id: place_name
            text: root.text
            bold: True
            theme_text_color: "Primary"
            font_style: "Subtitle1"
            shorten: True
            shorten_from: 'right'

        MDBoxLayout:
            orientation: "horizontal"
            adaptive_height: True
            
            MDIcon:
                icon: "star"
                theme_text_color: "Custom"
                text_color: 1, 0.7, 0, 1  # Gold color
                font_size: "16sp"
                size_hint_x: None
                width: "20dp"
            
            MDLabel:
                id: place_rating
                text: root.sub_text
                theme_text_color: "Secondary"
                font_style: "Caption"

<DashboardScreen>:
    name: "dashboard"
    MDBoxLayout:
        orientation: "vertical"
        md_bg_color: 1, 1, 1, 1 # White background

        # --- HEADER ---
        MDBoxLayout:
            size_hint_y: None
            height: dp(80)
            padding: [dp(20), dp(10), dp(20), dp(10)] # Left, Top, Right, Bottom
            spacing: dp(10)
            md_bg_color: 1, 1, 1, 1
            elevation: 0 

            # --- Avatar ---
            MDCard:
                size_hint: None, None
                size: dp(50), dp(50)
                radius: [25, ] # Make it a perfect circle (half of size)
                elevation: 0
                pos_hint: {"center_y": 0.5}
                
                # FitImage handles circular cropping better than Image
                FitImage:
                    id: profile_image
                    source: 'assets/user_avatar.png' 
                    radius: [25, ] 

            # --- Greeting Text ---
            MDBoxLayout:
                orientation: "vertical"
                adaptive_height: True
                adaptive_width: True
                pos_hint: {"center_y": 0.5}

                MDLabel:
                    text: "Welcome back,"
                    font_style: "Caption"
                    theme_text_color: "Secondary"
                    adaptive_height: True
                    adaptive_width: True

                MDLabel:
                    id: user_name
                    text: "" # Placeholder text
                    bold: True
                    font_size: "16sp"
                    size_hint_x: 1
                    theme_text_color: "Primary"
                    adaptive_height: True
                    adaptive_width: True

            # This pushes the buttons to the far right
            Widget:
                size_hint_x: 1

            # -- Notification Button ---
            MDIconButton:
                icon: "bell"
                pos_hint: {"right": 1, "center_y": 0.5}
                theme_icon_color: "Custom"
                icon_color: 0, 0, 0, 1 # Black icon
                md_bg_color: 0.95, 0.95, 0.95, 1 # Light gray background for the circle
                # Force a rounded background circle (size must match radius)
                size_hint: None, None
                size: dp(20), dp(20)
                user_font_size: "12sp"
                line_color: 0, 0, 0, 0 # Remove border line
                on_release: print("user pressed settings button")

            # --- Settings Button ---
            MDIconButton:
                icon: "cog"
                pos_hint: {"right": 1, "center_y": 0.5}
                theme_icon_color: "Custom"
                icon_color: 0, 0, 0, 1 # Black icon
                md_bg_color: 0.95, 0.95, 0.95, 1 # Light gray background for the circle
                # Force a rounded background circle (size must match radius)
                size_hint: None, None
                size: dp(20), dp(20)
                line_color: 0, 0, 0, 0 # Remove border line
                on_release: print("user pressed settings button")

        # --- Weather Card ---
        MDBoxLayout:
            size_hint_y: None
            height: dp(120) # Slightly taller for better spacing
            padding: [dp(20), 0, dp(20), 0]

            MDCard:
                size_hint: 1, 1
                radius: [dp(10), ]
                elevation: 0
                md_bg_color: 0.9, 0.9, 0.9, 1
                line_color: 0, 0, 0, 0.05
                padding: dp(25)

                MDFloatLayout:
                    size_hint_y: None

                    # --- LEFT SIDE: Text ---
                    MDBoxLayout:
                        orientation: "vertical"
                        adaptive_size: True
                        pos_hint: {"center_y": 0.5, "x": 0}
                        spacing: dp(0)

                        MDLabel:
                            id: weather_temp_label
                            text: "--Â°C" 
                            font_style: "H2"       # Bigger, thinner modern font
                            bold: True
                            theme_text_color: "Custom"
                            text_color: 0.15, 0.15, 0.15, 1 
                            adaptive_size: True

                        MDLabel:
                            id: weather_loc_label
                            text: "Location" 
                            font_style: "Subtitle1"
                            theme_text_color: "Custom"
                            text_color: 0.5, 0.5, 0.5, 1
                            adaptive_size: True

                    # --- RIGHT SIDE: Icon ---
                    MDIcon:
                        id: weather_icon
                        icon: "weather-partly-cloudy"
                        pos_hint: {"center_y": 0.5, "x": 0.8} 
                        theme_text_color: "Custom"
                        text_color: 0.6, 0.6, 0.6, 1
                        font_size: "64sp"

        # --- REST OF CONTENT ---
        MDScrollView:
            MDBoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                padding: dp(20)
                spacing: dp(20)

                # --- Section 1: Restaurants ---
                MDLabel:
                    id: restaurant_header
                    text: "Nearby Restaurants"
                    font_style: "H6"
                    bold: True
                    adaptive_height: True

                MDScrollView:
                    size_hint_y: None
                    height: "190dp"
                    do_scroll_x: True
                    do_scroll_y: False
                    bar_width: 0

                    MDBoxLayout:
                        id: restaurant_list
                        orientation: 'horizontal'
                        adaptive_width: True
                        spacing: "15dp"
                        padding: [0, 0, 0, 10]

                # --- Section 2: Attractions ---
                MDLabel:
                    text: "Places to Visit"
                    font_style: "H6"
                    bold: True
                    adaptive_height: True

                MDScrollView:
                    size_hint_y: None
                    height: "190dp"
                    do_scroll_x: True
                    do_scroll_y: False
                    bar_width: 0

                    MDBoxLayout:
                        id: attraction_list
                        orientation: 'horizontal'
                        adaptive_width: True
                        spacing: "15dp"
                        padding: [0, 0, 0, 10]

                # --- Section 3: Activities ---
                MDLabel:
                    text: "Activities to do"
                    font_style: "H6"
                    bold: True
                    adaptive_height: True

                MDScrollView:
                    size_hint_y: None
                    height: "190dp"
                    do_scroll_x: True
                    do_scroll_y: False
                    bar_width: 0

                    MDBoxLayout:
                        id: activity_list
                        orientation: 'horizontal'
                        adaptive_width: True
                        spacing: "15dp"
                        padding: [0, 0, 0, 10]

<ProfileScreen>
    name: "profile"
    MDBoxLayout:
        orientation: "vertical"
        md_bg_color: 1, 1, 1, 1 # White background

        # --- HEADER ---
        MDBoxLayout:
            size_hint_y: None
            height: dp(80)
            padding: [dp(20), dp(10), dp(20), dp(10)] # Left, Top, Right, Bottom
            spacing: dp(10)
            md_bg_color: 1, 1, 1, 1
            elevation: 0 

            # --- Avatar ---
            MDCard:
                size_hint: None, None
                size: dp(50), dp(50)
                radius: [25, ] # Make it a perfect circle (half of size)
                elevation: 0
                pos_hint: {"center_y": 0.5}
                
                # FitImage handles circular cropping better than Image
                FitImage:
                    id: profile_image
                    source: 'assets/user_avatar.png' 
                    radius: [25, ] 

            # --- Greeting Text ---
            MDBoxLayout:
                orientation: "vertical"
                adaptive_height: True
                adaptive_width: True
                pos_hint: {"center_y": 0.5}

                MDLabel:
                    text: "Welcome back,"
                    font_style: "Caption"
                    theme_text_color: "Secondary"
                    adaptive_height: True
                    adaptive_width: True

                MDLabel:
                    id: user_name
                    text: "" # Placeholder text
                    bold: True
                    font_size: "16sp"
                    size_hint_x: 1
                    theme_text_color: "Primary"
                    adaptive_height: True
                    adaptive_width: True